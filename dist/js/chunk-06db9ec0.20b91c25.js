(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06db9ec0"],{"4c83":function(e,t,a){},a55b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"loginForm",staticClass:"loginContainer",attrs:{rules:e.rules,model:e.loginForm}},[a("h3",{staticStyle:{"text-align":"center"}},[e._v("登录")]),a("el-tabs",{staticStyle:{height:"100px"},attrs:{"tab-position":"top",stretch:"","before-leave":e.leaveTab}},[a("el-tab-pane",{attrs:{label:"手机号登录"}},[a("el-form-item",{attrs:{prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.loginForm.phone,callback:function(t){e.$set(e.loginForm,"phone",t)},expression:"loginForm.phone"}})],1)],1),a("el-tab-pane",{attrs:{label:"邮箱登录"}},[a("el-form-item",{attrs:{prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.loginForm.email,callback:function(t){e.$set(e.loginForm,"email",t)},expression:"loginForm.email"}})],1)],1)],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{"show-password":"",placeholder:"请输入密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),a("el-form-item",{attrs:{prop:"captcha"}},[a("el-input",{staticStyle:{width:"60%"},attrs:{tpye:"text",placeholder:"点击图片更换验证码"},model:{value:e.loginForm.captcha,callback:function(t){e.$set(e.loginForm,"captcha",t)},expression:"loginForm.captcha"}}),a("img",{staticStyle:{float:"right",cursor:"pointer"},attrs:{src:e.captcha,alt:"验证码"},on:{click:e.updateCaptcha}})],1),a("el-form-item",{staticStyle:{"margin-bottom":"0"}},[a("el-link",{staticClass:"rememberMe",attrs:{underline:!1}},[a("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("保持登录")])],1),a("el-link",{staticClass:"forgot",attrs:{href:"https://zhangguapi.com",target:"_blank",underline:!1}},[e._v("忘记密码？")])],1),a("el-form-item",[a("el-button",{staticStyle:{width:"48%"},attrs:{type:"primary",round:""},on:{click:e.clickLogin}},[e._v("登录")]),a("el-button",{staticStyle:{width:"48%",float:"right"},attrs:{type:"success",round:""},on:{click:e.goToRegisterPage}},[e._v("注册")])],1)],1),e._m(0)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"img"},[a("img",{attrs:{src:"https://i.loli.net/2019/04/23/5cbf0a3fe48e9.png",alt:""}})])}],o=(a("b0c0"),a("7c15")),s=a("231d"),l={name:"Login",data:function(){return{checked:!0,loginForm:{phone:"",email:"",password:"",datetime:"",captcha:""},rules:{password:[{required:!0,message:"密码不能为空",trigger:"blur"}],captcha:[{required:!0,message:"验证码不能为空",trigger:"blur"}]}}},mounted:function(){this.loginForm.datetime=(new Date).getTime(),this.$store.state.uid&&this.$store.state.name&&this.$store.state.gid&&this.$store.state.isAdmin&&this.$router.push("/")},computed:{captcha:function(){return"/api/captcha?dateTime="+this.loginForm.datetime}},methods:{updateCaptcha:function(){this.loginForm.datetime=(new Date).getTime()},leaveTab:function(e){switch(e){case"0":delete this.rules.email,this.rules.phone=[{required:!0,message:"手机号不能为空",trigger:"blur"}],this.loginForm.phone="";break;case"1":delete this.rules.phone,this.rules.email=[{required:!0,message:"邮箱不能为空",trigger:"blur"}],this.loginForm.email="";break}this.loginForm.password=""},clickLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){t?Object(o["c"])("/login",e.loginForm).then((function(t){var a=t.data.data;a?e.checked&&(localStorage.setItem("token",a),Object(s["a"])()?(e.$message.success("登录成功。"),e.$store.state.isAdmin?e.$router.push("/admin"):e.$router.push("/")):(e.$message.error(t.data.msg),e.updateCaptcha())):(e.$message.error(t.data.msg),e.updateCaptcha())})).catch((function(t){e.updateCaptcha()})):e.$message.error("请输入完整！")}))},goToRegisterPage:function(){this.$router.push("/register")}}},n=l,c=(a("e700"),a("2877")),m=Object(c["a"])(n,r,i,!1,null,"047cd6ce",null);t["default"]=m.exports},e700:function(e,t,a){"use strict";a("4c83")}}]);
//# sourceMappingURL=chunk-06db9ec0.20b91c25.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32144ef6"],{"498a":function(t,e,n){"use strict";var s=n("23e7"),r=n("58a8").trim,i=n("c8d2");s({target:"String",proto:!0,forced:i("trim")},{trim:function(){return r(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var s=n("e330"),r=n("1d80"),i=n("577e"),o=n("5899"),a=s("".replace),l="["+o+"]",c=RegExp("^"+l+l+"*"),u=RegExp(l+l+"*$"),d=function(t){return function(e){var n=i(r(e));return 1&t&&(n=a(n,c,"")),2&t&&(n=a(n,u,"")),n}};t.exports={start:d(1),end:d(2),trim:d(3)}},"5da0":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",[n("el-col",{attrs:{span:16,offset:4}},[n("el-card",[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticStyle:{"line-height":"28px","font-size":"20px"}},[t._v("比赛列表")]),n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",round:"",size:"mini"},on:{click:function(e){return t.$router.push("/manage/contest")}}},[t._v("添加比赛 ")])],1),n("el-table",{attrs:{data:t.contests,fit:"","current-row-key":t.contests.contestId}},[n("el-table-column",{attrs:{prop:"contestTitle",label:"比赛名称",align:"center"}}),n("el-table-column",{attrs:{prop:"name",label:"发布人",width:"150%",align:"center"}}),n("el-table-column",{attrs:{prop:"status",label:"审核状态",width:"150%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.status?n("el-tag",{attrs:{type:"success"}},[t._v("通过")]):e.row.statusText?n("el-popover",{attrs:{placement:"top-start",width:"150",trigger:"hover",content:e.row.statusText}},[n("el-button",{attrs:{slot:"reference",type:"danger",size:"mini",plain:""},slot:"reference"},[t._v("失败")])],1):n("el-tag",{attrs:{type:"warning"}},[t._v("审核中")])]}}])}),n("el-table-column",{attrs:{prop:"number",label:"报名人数",width:"100%",align:"center"}}),n("el-table-column",{attrs:{label:"操作",width:"150%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.status?n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){t.dialogVisible=!0,t.cid=e.row.contestId}}},[t._v(" 发送消息 ")]):t._e(),e.row.status||e.row.statusText?n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return t.updateContests(e.row.contestId)}}},[t._v("修改比赛 ")]):t._e()]}}])}),n("el-table-column",{attrs:{label:"评审",width:"110%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.status?new Date>new Date(e.row.regEndTime)?n("el-button",{attrs:{type:"success",size:"mini",round:""},on:{click:function(n){return t.sendMessage(e.row.contestId)}}},[t._v("评审 ")]):n("el-popover",{attrs:{placement:"top-start",trigger:"hover",content:"报名未结束，不可评审"}},[n("el-button",{attrs:{slot:"reference",type:"warning",size:"mini",round:""},slot:"reference"},[t._v("禁用")])],1):n("el-popover",{attrs:{placement:"top-start",trigger:"hover",content:"审核未完成"}},[n("el-button",{attrs:{slot:"reference",type:"info",size:"mini",round:""},slot:"reference"},[t._v("禁用")])],1)]}}])}),n("el-table-column",{attrs:{label:"删除",width:"110%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popconfirm",{attrs:{title:"这是一段内容确定删除吗？"},on:{confirm:function(n){return t.removeContest(e.row.contestId,e.row.contestTitle)}}},[n("el-button",{attrs:{slot:"reference",type:"danger",size:"mini",round:""},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1)],1)],1),n("el-dialog",{attrs:{title:"发送消息",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{attrs:{"label-position":"top"}},[n("el-form-item",{attrs:{label:"标题",prop:"title"}},[n("el-input",{attrs:{placeholder:"请输入标题",maxlength:"20","show-word-limit":"",rules:[{required:!0,message:"标题不能为空"}]},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),n("el-form-item",{attrs:{label:"内容",prop:"text"}},[n("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容",rules:[{required:!0,message:"内容不能为空"}]},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),n("el-form-item",{staticStyle:{float:"right"}},[n("el-button",{attrs:{round:""},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary",round:""},on:{click:t.send}},[t._v("发送")])],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)],1)},r=[],i=(n("498a"),n("7c15")),o={name:"Manage",data:function(){return{dialogVisible:!1,visible:!1,contests:[],cid:void 0,title:"",text:""}},watch:{"$store.state.gid":function(){this.isStudent()}},methods:{isStudent:function(){this.$store.state.gid&&2!==this.$store.state.gid?this.contestsLoading():(this.$message.warning("请登录！"),this.$router.push("/login"))},contestsLoading:function(){var t=this;Object(i["b"])("/contests/gid",{gid:this.$store.state.gid}).then((function(e){e&&(t.contests=e.data.data)}))},sendMessage:function(t,e){this.$router.push({name:"manage-review",params:{contestId:t,contestTitle:e}})},updateContests:function(t){this.$router.push({name:"manage-contest",params:{contestId:t}})},removeContest:function(t){var e=this;Object(i["a"])("/deleteContest/"+t).then((function(t){t.data.status?e.$message.success("删除成功。"):e.$message.error("删除失败！"),e.contestsLoading()})),this.visible=!1},send:function(){var t=this;if(""!==this.title.trim()&&""!==this.text.trim()){var e={cid:this.cid,uid:this.$store.state.uid,title:this.title,text:this.text};Object(i["c"])("/messages/save",e).then((function(e){e.data.status?t.$message.success("发送成功。"):t.$message.error("发送失败！"),t.dialogVisible=!1}))}else this.$message.warning("请在左侧勾选学生或检测标题内容是否为空！")}},mounted:function(){this.isStudent()}},a=o,l=(n("cf8e"),n("2877")),c=Object(l["a"])(a,s,r,!1,null,"4341f394",null);e["default"]=c.exports},c8d2:function(t,e,n){var s=n("5e77").PROPER,r=n("d039"),i=n("5899"),o="​᠎";t.exports=function(t){return r((function(){return!!i[t]()||o[t]()!==o||s&&i[t].name!==t}))}},cf8e:function(t,e,n){"use strict";n("ec76")},ec76:function(t,e,n){}}]);
//# sourceMappingURL=chunk-32144ef6.72b024e7.js.map
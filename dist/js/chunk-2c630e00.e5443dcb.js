(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c630e00"],{"158d":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-form",{ref:"contestForm",attrs:{model:t.contestForm,"label-width":"80px","label-position":"top",rules:t.rules}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:16,offset:4}},[r("el-card",{attrs:{shadow:"never"}},[r("el-form-item",{attrs:{label:"比赛名称",prop:"contestTitle"}},[r("el-input",{attrs:{maxlength:"50","show-word-limit":"",placeholder:"输入比赛名称"},model:{value:t.contestForm.contestTitle,callback:function(e){t.$set(t.contestForm,"contestTitle",e)},expression:"contestForm.contestTitle"}})],1),r("el-form-item",{attrs:{label:"图片url",prop:"url"}},[r("el-input",{attrs:{maxlength:"255","show-word-limit":"",placeholder:"输入图片的地址，例如：https://pic.imgdb.cn/item/61e95e482ab3f51d91903853.jpg"},model:{value:t.contestForm.url,callback:function(e){t.$set(t.contestForm,"url",e)},expression:"contestForm.url"}})],1)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12,offset:4}},[r("el-card",{attrs:{shadow:"never","body-style":{padding:"0"}}},[r("mdEditor",{staticStyle:{"min-height":"600px"},attrs:{ishljs:!0},model:{value:t.contestForm.contestText,callback:function(e){t.$set(t.contestForm,"contestText",e)},expression:"contestForm.contestText"}})],1)],1),r("el-col",{attrs:{span:4}},[r("el-card",{staticStyle:{"min-height":"600px"},attrs:{shadow:"never"}},[r("el-form-item",{attrs:{label:"报名开始时间",prop:"regStartTime"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"08:00:00","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.contestForm.regStartTime,callback:function(e){t.$set(t.contestForm,"regStartTime",e)},expression:"contestForm.regStartTime"}})],1),r("el-form-item",{attrs:{label:"报名结束时间",prop:"regEndTime"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"23:59:59","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.contestForm.regEndTime,callback:function(e){t.$set(t.contestForm,"regEndTime",e)},expression:"contestForm.regEndTime"}})],1),r("el-form-item",{attrs:{label:"比赛开始时间",prop:"startTime"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"08:00:00","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.contestForm.startTime,callback:function(e){t.$set(t.contestForm,"startTime",e)},expression:"contestForm.startTime"}})],1),r("el-form-item",{attrs:{label:"比赛结束时间",prop:"endTime"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"23:59:59","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.contestForm.endTime,callback:function(e){t.$set(t.contestForm,"endTime",e)},expression:"contestForm.endTime"}})],1),r("el-form-item",{staticStyle:{float:"right","padding-top":"60px"}},[r("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重置")]),r("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v(t._s(t.btnText))])],1)],1)],1)],1)],1)],1)},s=[],n=(r("d9e2"),r("7c15")),a=(r("64e1"),r("b2d8")),i={name:"Contest",components:{mdEditor:a.mavonEditor},data:function(){var t=this,e=function(e,r,o){""===r?o(new Error("报名结束时间不能为空")):r<t.contestForm.regStartTime?o(new Error("报名结束时间不能小于报名开始时间")):o()},r=function(e,r,o){""===r?o(new Error("报名结束时间不能为空")):r<t.contestForm.regEndTime?o(new Error("比赛开始时间不能小于报名结束时间")):o()},o=function(e,r,o){""===r?o(new Error("报名结束时间不能为空")):r<t.contestForm.startTime?o(new Error("比赛结束时间不能小于比赛开始时间")):o()};return{addOrUpdate:!0,btnText:"立即发布",contestForm:{contestTitle:"",contestText:"## 请输入比赛内容\n",url:"",promulgator:0,groupId:0,regStartTime:"",regEndTime:"",startTime:"",endTime:"",status:!1},rules:{contestTitle:[{required:!0,message:"请输入比赛名称",trigger:"blur"}],url:[{required:!0,message:"请输入图片地址",trigger:"blur"}],regStartTime:[{required:!0,message:"报名开始时间不能为空",trigger:"blur"}],regEndTime:[{required:!0,validator:e,trigger:"blur"}],startTime:[{required:!0,validator:r,trigger:"blur"}],endTime:[{required:!0,validator:o,trigger:"blur"}]}}},mounted:function(){var t=this,e=this.$store.state.gid,r=this.$store.state.uid;void 0===e&&void 0===r?(this.$message.error("获取用户信息失败！"),this.$router.push("/404")):(this.contestForm.groupId=e,this.contestForm.promulgator=r),this.$route.params.contestId?(this.addOrUpdate=!1,this.btnText="立即修改",document.title="修改比赛",Object(n["b"])("/contestForUpdate/"+this.$route.params.contestId).then((function(e){var r=e.data.data;r?(t.contestForm.contestTitle=r.contestTitle,t.contestForm.contestId=t.$route.params.contestId,t.contestForm.contestText=r.contestText,t.contestForm.url=r.url,t.contestForm.regStartTime=r.regStartTime,t.contestForm.regEndTime=r.regEndTime,t.contestForm.startTime=r.startTime,t.contestForm.endTime=r.endTime):t.$router.push("/404")}))):document.title="发布比赛"},methods:{submitForm:function(){var t=this;this.$refs.contestForm.validate((function(e){if(!e)return t.$message.error("请修改错误项！"),!1;t.addOrUpdate?Object(n["c"])("/addContest",t.contestForm).then((function(e){e.data.status?(t.$message.success("发布成功，等待审核。"),t.$router.push("/manage")):t.$message.error("发布失败！")})):Object(n["d"])("/updateContest",t.contestForm).then((function(e){e.data.status?t.$message.success("修改成功，等待审核。"):t.$message.error("修改失败！"),t.$router.push("/manage")}))}))},resetForm:function(){this.$refs.contestForm.resetFields()}}},m=i,l=(r("3f0c"),r("2877")),c=Object(l["a"])(m,o,s,!1,null,"80677a30",null);e["default"]=c.exports},"2f5d":function(t,e,r){},"3f0c":function(t,e,r){"use strict";r("2f5d")},"64e1":function(t,e,r){}}]);
//# sourceMappingURL=chunk-2c630e00.e5443dcb.js.map